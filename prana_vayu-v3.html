<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PranaVayu â€” Bio-Filter Air Purifier</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Jost:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
<style>
/*
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PRÄ€NAVAYU â€” "Plant & Air"
  Direction: Luxury botanical editorial
  Black #080808 + cream #f5f0e8 + sage #8a9e7a
  Cormorant Garamond (soul) + Jost (precision)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
*/
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  /* Core palette */
  --black:    #080808;
  --black2:   #111211;
  --black3:   #1a1c1a;
  --cream:    #f5f0e8;
  --cream2:   #ece6d8;
  --cream3:   #d8d0be;
  --sage:     #8a9e7a;
  --sage-dim: rgba(138,158,122,0.15);
  --sage-mid: rgba(138,158,122,0.28);
  --sand:     #c4a882;
  --white:    #ffffff;

  /* AQI dynamic */
  --aqi-c:    #8a9e7a;
  --aqi-dim:  rgba(138,158,122,0.15);
  --aqi-text: #0a0f08;

  /* Cards */
  --card:     rgba(255,255,255,0.04);
  --card-h:   rgba(255,255,255,0.07);
  --border:   rgba(245,240,232,0.1);
  --border-h: rgba(245,240,232,0.22);

  /* Text */
  --text:     #f5f0e8;
  --muted:    rgba(245,240,232,0.48);
  --muted2:   rgba(245,240,232,0.28);

  --r: 16px;
  --T: 0.85s cubic-bezier(0.4,0,0.2,1);
}

html{scroll-behavior:smooth}
body{
  font-family:'Jost',sans-serif;
  background:var(--black);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
}

/* scrollbar */
::-webkit-scrollbar{width:3px}
::-webkit-scrollbar-track{background:var(--black)}
::-webkit-scrollbar-thumb{background:var(--black3);border-radius:3px}

/* â•â• BACKGROUND â€” botanical ink bleed â•â• */
.bg{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
/* Large soft vignette blobs */
.bg-b{position:absolute;border-radius:50%;filter:blur(140px);transition:background var(--T)}
.b1{width:900px;height:900px;top:-300px;left:-200px;background:radial-gradient(circle,#1c2418 0%,transparent 65%);opacity:.7;animation:bd1 20s ease-in-out infinite}
.b2{width:700px;height:700px;bottom:-200px;right:-150px;background:radial-gradient(circle,#181a14 0%,transparent 65%);opacity:.8;animation:bd2 25s ease-in-out infinite}
.b3{width:400px;height:400px;top:40%;left:50%;transform:translateX(-50%);background:radial-gradient(circle,var(--aqi-c) 0%,transparent 70%);opacity:.05;transition:background var(--T);animation:bd3 12s ease-in-out infinite}
@keyframes bd1{0%,100%{transform:translate(0,0)}50%{transform:translate(30px,40px)}}
@keyframes bd2{0%,100%{transform:translate(0,0)}50%{transform:translate(-25px,-30px)}}
@keyframes bd3{0%,100%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.4)}}

/* Botanical line art overlay â€” SVG leaf veins */
.bg-leaves{position:absolute;inset:0;opacity:.035}
.bg-leaves svg{width:100%;height:100%}

/* Fine grain */
.bg::after{
  content:'';position:absolute;inset:0;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  opacity:.5;
}

/* â•â• PAGES â•â• */
.page{position:relative;z-index:1;min-height:100vh;display:none;flex-direction:column}
.page.active{display:flex}

/* â•â• NAV â•â• */
nav{
  display:flex;align-items:center;justify-content:space-between;
  padding:20px 52px;border-bottom:1px solid rgba(245,240,232,0.07);
  position:sticky;top:0;z-index:100;
  background:rgba(8,8,8,0.85);backdrop-filter:blur(24px);
}
.logo{display:flex;align-items:center;gap:14px;cursor:pointer;text-decoration:none}
.logo-icon{
  width:38px;height:38px;border-radius:9px;
  border:1px solid rgba(245,240,232,0.15);
  background:var(--black3);
  display:flex;align-items:center;justify-content:center;font-size:1.1rem;
  transition:border-color .3s;
}
.logo:hover .logo-icon{border-color:rgba(245,240,232,0.35)}
.logo-words{display:flex;flex-direction:column;line-height:1.1}
.logo-name{font-family:'Cormorant Garamond',serif;font-weight:600;font-size:1.2rem;letter-spacing:.03em;color:var(--cream)}
.logo-sub{font-size:.56rem;letter-spacing:.22em;text-transform:uppercase;color:var(--muted);font-weight:400}
.nav-r{display:flex;gap:10px;align-items:center}
.nb{
  padding:8px 22px;border-radius:100px;border:1px solid var(--border);
  background:transparent;color:var(--muted);font-family:'Jost',sans-serif;
  font-size:.83rem;cursor:pointer;transition:all .22s;letter-spacing:.03em;
}
.nb:hover{color:var(--text);border-color:var(--border-h);background:var(--card)}
.nb.fill{
  background:var(--cream);color:var(--black);border-color:transparent;
  font-weight:600;letter-spacing:.04em;
}
.nb.fill:hover{background:var(--cream2);transform:translateY(-1px)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LANDING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero{
  flex:1;display:flex;flex-direction:column;align-items:center;
  padding:80px 52px 60px;gap:0;
}

/* Top split */
.hero-split{
  display:grid;grid-template-columns:1fr 420px;
  gap:72px;align-items:center;width:100%;max-width:1100px;
  margin-bottom:100px;
}

.hero-left{}
.hero-kicker{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid rgba(245,240,232,0.12);
  padding:6px 15px;border-radius:100px;
  font-size:.7rem;letter-spacing:.18em;text-transform:uppercase;
  color:var(--muted);margin-bottom:28px;
}
.kicker-leaf{width:7px;height:7px;background:var(--sage);border-radius:50%;animation:leafpulse 3s ease-in-out infinite}
@keyframes leafpulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.7)}}

.hero-h1{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(3rem,5vw,5.2rem);
  font-weight:700;line-height:1.0;
  letter-spacing:-.01em;
  margin-bottom:24px;color:var(--cream);
}
.hero-h1 em{font-style:italic;color:var(--cream3)}
.hero-h1 .hl{
  position:relative;display:inline-block;color:var(--white);
}
.hero-h1 .hl::after{
  content:'';position:absolute;left:0;bottom:-4px;right:0;
  height:1px;background:linear-gradient(90deg,var(--sage),transparent);
}

.hero-p{
  font-size:.97rem;color:var(--muted);line-height:1.85;
  max-width:420px;font-weight:300;margin-bottom:38px;
}
.hero-btns{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:48px}
.btn-blk{
  padding:13px 32px;border-radius:100px;border:none;cursor:pointer;
  background:var(--cream);color:var(--black);
  font-family:'Jost',sans-serif;font-size:.9rem;font-weight:600;
  letter-spacing:.04em;transition:all .25s;
}
.btn-blk:hover{background:var(--white);transform:translateY(-2px);box-shadow:0 12px 32px rgba(0,0,0,.5)}
.btn-line{
  padding:13px 32px;border-radius:100px;
  border:1px solid var(--border);background:transparent;
  color:var(--text);font-family:'Jost',sans-serif;font-size:.9rem;
  cursor:pointer;letter-spacing:.03em;transition:all .25s;
}
.btn-line:hover{border-color:var(--border-h);background:var(--card);transform:translateY(-2px)}

/* proof strip */
.proof{display:flex;gap:18px;flex-wrap:wrap}
.proof-i{display:flex;align-items:center;gap:7px;font-size:.77rem;color:var(--muted2)}
.proof-dot{width:5px;height:5px;border-radius:50%;background:var(--sage);flex-shrink:0}

/* â”€â”€ DEVICE CARD (right side) â”€â”€ */
.device-card{
  background:var(--black3);
  border:1px solid rgba(245,240,232,0.1);
  border-radius:24px;padding:30px 26px;
  box-shadow:0 60px 120px rgba(0,0,0,.7),inset 0 1px 0 rgba(255,255,255,.04);
  position:relative;overflow:hidden;
}
.device-card::before{
  content:'';position:absolute;
  width:320px;height:320px;border-radius:50%;
  background:radial-gradient(circle,var(--aqi-c) 0%,transparent 65%);
  top:-100px;left:50%;transform:translateX(-50%);
  opacity:.08;filter:blur(40px);transition:background var(--T);
  pointer-events:none;
}
.dc-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:22px}
.dc-name{font-family:'Cormorant Garamond',serif;font-size:.9rem;font-weight:600;color:var(--muted);letter-spacing:.06em;text-transform:uppercase}
.dc-live{display:flex;align-items:center;gap:5px;font-size:.68rem;color:var(--sage);letter-spacing:.1em;text-transform:uppercase}
.dc-dot{width:5px;height:5px;border-radius:50%;background:var(--sage);animation:leafpulse 2s ease-in-out infinite}

/* AQI big number â€” editorial style */
.dc-aqi-big{text-align:center;padding:28px 0 20px;position:relative}
.dc-aqi-num{
  font-family:'Cormorant Garamond',serif;
  font-size:6.5rem;font-weight:700;line-height:.9;
  color:var(--aqi-c);letter-spacing:-.04em;
  text-shadow:0 0 60px var(--aqi-dim);
  transition:color var(--T),text-shadow var(--T);
  display:block;
}
.dc-aqi-label{font-size:.62rem;letter-spacing:.22em;text-transform:uppercase;color:var(--muted);margin-top:4px}
.dc-status-pill{
  display:inline-block;padding:5px 16px;border-radius:100px;
  font-size:.74rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;
  background:var(--aqi-c);color:var(--aqi-text);
  transition:background var(--T),color var(--T);
  margin-top:10px;
}

/* Filter mini bar in device card */
.dc-filter{
  background:rgba(0,0,0,0.4);border:1px solid rgba(245,240,232,0.07);
  border-radius:12px;padding:14px 15px;margin-top:20px;
}
.dcf-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:9px}
.dcf-lbl{font-size:.65rem;letter-spacing:.14em;text-transform:uppercase;color:var(--muted)}
.dcf-pct{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:600;color:var(--cream);transition:color var(--T)}
.dcf-track{height:4px;background:rgba(255,255,255,0.07);border-radius:100px;overflow:hidden}
.dcf-fill{height:100%;border-radius:100px;background:var(--sage);transition:width 1.4s ease,background var(--T)}

/* Mini stat row in device card */
.dc-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:14px}
.dcs{
  background:rgba(0,0,0,0.3);border:1px solid rgba(245,240,232,0.06);
  border-radius:10px;padding:10px 8px;text-align:center;
}
.dcs-v{font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:600;color:var(--cream)}
.dcs-l{font-size:.58rem;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);margin-top:2px}

/* Auto-badge */
.auto-pill{
  display:flex;align-items:center;gap:8px;margin-top:14px;
  padding:9px 13px;border-radius:10px;font-size:.75rem;
  background:rgba(138,158,122,0.08);border:1px solid rgba(138,158,122,0.18);
  color:var(--muted);
}
.auto-pill span{color:var(--sage);font-weight:600}

/* â”€â”€ FEATURES GRID â”€â”€ */
.sec{width:100%;max-width:1100px;margin-bottom:80px}
.sec-eyebrow{
  display:flex;align-items:center;gap:14px;justify-content:center;
  font-size:.62rem;letter-spacing:.24em;text-transform:uppercase;
  color:var(--muted2);margin-bottom:38px;
}
.sec-eyebrow::before,.sec-eyebrow::after{content:'';flex:0 0 50px;height:1px;background:var(--border)}

.feat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
.feat{
  border:1px solid var(--border);border-radius:var(--r);padding:26px 20px;
  background:var(--card);backdrop-filter:blur(12px);
  transition:all .25s;position:relative;overflow:hidden;
}
.feat::after{
  content:'';position:absolute;bottom:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--sage),transparent);
  opacity:0;transition:opacity .3s;
}
.feat:hover{background:var(--card-h);border-color:var(--border-h);transform:translateY(-3px)}
.feat:hover::after{opacity:1}
.feat-num{
  font-family:'Cormorant Garamond',serif;font-size:.75rem;
  color:var(--muted2);letter-spacing:.12em;margin-bottom:14px;
}
.feat-ico{font-size:1.5rem;margin-bottom:12px;display:block}
.feat-t{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:600;margin-bottom:7px;color:var(--cream)}
.feat-d{font-size:.77rem;color:var(--muted);line-height:1.72}

/* â”€â”€ REAL FILTER STACK SECTION â”€â”€ */
.filter-sec{width:100%;max-width:1100px;margin-bottom:80px}
.fs-grid{display:grid;grid-template-columns:1fr 1fr;gap:56px;align-items:start}

/* Visual stack */
.stack-visual{position:sticky;top:100px}
.sv-title{
  font-family:'Cormorant Garamond',serif;font-size:.8rem;
  color:var(--muted2);letter-spacing:.16em;text-transform:uppercase;
  margin-bottom:20px;
}
.layer-stack{display:flex;flex-direction:column;gap:0;border-radius:18px;overflow:hidden;border:1px solid var(--border)}
.layer{
  display:grid;grid-template-columns:48px 1fr auto;
  align-items:center;gap:14px;
  padding:16px 18px;
  border-bottom:1px solid rgba(245,240,232,0.06);
  transition:background .2s;cursor:default;
  position:relative;
}
.layer:last-child{border-bottom:none}
.layer:hover{background:rgba(255,255,255,0.03)}
/* Coloured left bar */
.layer::before{
  content:'';position:absolute;left:0;top:0;bottom:0;
  width:3px;background:var(--lc,#8a9e7a);
}
.l-ico{
  width:40px;height:40px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  font-size:1.2rem;
  background:rgba(0,0,0,0.4);border:1px solid rgba(245,240,232,0.07);
}
.l-info{}
.l-name{font-family:'Cormorant Garamond',serif;font-size:.95rem;font-weight:600;color:var(--cream);margin-bottom:2px}
.l-desc{font-size:.7rem;color:var(--muted);line-height:1.5}
.l-tag{
  font-size:.62rem;letter-spacing:.1em;text-transform:uppercase;
  padding:4px 10px;border-radius:100px;white-space:nowrap;
  background:rgba(138,158,122,0.1);border:1px solid rgba(138,158,122,0.2);
  color:var(--sage);
}

/* Stack airflow arrow */
.airflow-arrow{
  text-align:center;padding:10px 0;
  font-size:.64rem;letter-spacing:.2em;text-transform:uppercase;
  color:var(--muted2);display:flex;align-items:center;justify-content:center;gap:8px;
}
.af-line{flex:1;height:1px;background:var(--border)}

/* Right text */
.fs-text{}
.fs-h{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(2rem,3vw,3rem);font-weight:700;line-height:1.1;
  margin-bottom:18px;color:var(--cream);
}
.fs-h em{font-style:italic;color:var(--cream3)}
.fs-p{font-size:.9rem;color:var(--muted);line-height:1.85;margin-bottom:16px;font-weight:300}
.fs-stats{display:flex;gap:28px;margin-top:28px;flex-wrap:wrap}
.fss{border-left:2px solid var(--sage);padding-left:14px}
.fss-v{font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:700;color:var(--cream);line-height:1}
.fss-l{font-size:.67rem;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);margin-top:3px}

/* â”€â”€ HOW IT WORKS â”€â”€ */
.how-sec{width:100%;max-width:1100px;margin-bottom:80px}
.how-row{display:grid;grid-template-columns:repeat(4,1fr);gap:1px;background:var(--border);border-radius:var(--r);overflow:hidden}
.how-step{
  padding:32px 24px;background:var(--black2);
  transition:background .2s;
}
.how-step:hover{background:var(--black3)}
.hs-n{
  font-family:'Cormorant Garamond',serif;font-size:3rem;
  font-weight:700;color:rgba(245,240,232,0.07);
  line-height:1;margin-bottom:16px;
}
.hs-ico{font-size:1.5rem;margin-bottom:12px;display:block}
.hs-t{font-family:'Cormorant Garamond',serif;font-size:1rem;font-weight:600;color:var(--cream);margin-bottom:7px}
.hs-d{font-size:.76rem;color:var(--muted);line-height:1.7}

/* â”€â”€ AQI BAND â”€â”€ */
.aqi-band{width:100%;max-width:700px;margin-bottom:80px}
.aqi-band-title{font-size:.62rem;letter-spacing:.22em;text-transform:uppercase;color:var(--muted2);text-align:center;margin-bottom:14px}
.aqi-bar{display:flex;border-radius:100px;overflow:hidden;height:8px}
.ab{flex:1}
.ab1{background:#4caf50}.ab2{background:#cddc39}.ab3{background:#ff9800}
.ab4{background:#f44336}.ab5{background:#9c27b0}.ab6{background:#7b1616}
.aqi-lbls{display:flex;justify-content:space-between;margin-top:6px}
.aqi-lbl{font-size:.6rem;color:var(--muted2)}
.aqi-note{text-align:center;margin-top:10px;font-size:.72rem;color:var(--muted2)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTH PAGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.auth-wrap{flex:1;display:flex;align-items:center;justify-content:center;padding:40px 24px}
.auth-box{
  background:var(--black2);
  border:1px solid var(--border);border-radius:22px;
  padding:44px 40px;width:100%;max-width:420px;
  box-shadow:0 40px 80px rgba(0,0,0,.6);
  animation:riseIn .4s ease both;
}
.ab-logo{display:flex;align-items:center;gap:10px;margin-bottom:24px}
.ab-logo .logo-icon{width:28px;height:28px;font-size:.85rem}
.ab-logo .logo-name{font-family:'Cormorant Garamond',serif;font-weight:600;font-size:1rem;color:var(--cream);letter-spacing:.03em}
.ab-h{font-family:'Cormorant Garamond',serif;font-size:1.8rem;font-weight:700;color:var(--cream);margin-bottom:6px}
.ab-sub{color:var(--muted);font-size:.84rem;margin-bottom:28px;line-height:1.6;font-weight:300}
.err-box{background:rgba(244,67,54,0.08);border:1px solid rgba(244,67,54,0.25);border-radius:9px;padding:10px 13px;font-size:.8rem;color:#ff8a80;margin-bottom:14px;display:none}
.err-box.show{display:block}
.fg{margin-bottom:14px}
.fl{display:block;font-size:.68rem;font-weight:500;color:var(--muted);letter-spacing:.1em;text-transform:uppercase;margin-bottom:7px}
.fi{
  width:100%;background:rgba(0,0,0,0.5);
  border:1px solid rgba(245,240,232,0.1);
  border-radius:10px;padding:11px 14px;color:var(--text);
  font-family:'Jost',sans-serif;font-size:.9rem;outline:none;
  transition:border-color .2s,box-shadow .2s,background .2s;
}
.fi:focus{border-color:var(--sage);box-shadow:0 0 0 3px rgba(138,158,122,0.12);background:rgba(0,0,0,0.7)}
.fi::placeholder{color:rgba(245,240,232,0.18)}
.frow{display:grid;grid-template-columns:1fr 1fr;gap:12px}
/* Password match indicator */
.pw-match{font-size:.7rem;margin-top:5px;display:none}
.pw-match.show{display:block}
.pw-ok{color:var(--sage)}.pw-no{color:#ff7043}
.btn-auth{
  width:100%;padding:12px;border-radius:10px;border:none;cursor:pointer;margin-top:8px;
  background:var(--cream);color:var(--black);
  font-family:'Jost',sans-serif;font-size:.92rem;font-weight:600;
  letter-spacing:.04em;transition:all .22s;
}
.btn-auth:hover{background:var(--white);transform:translateY(-1px)}
.btn-auth:disabled{opacity:.45;cursor:not-allowed;transform:none}
.adiv{display:flex;align-items:center;gap:10px;margin:20px 0;color:var(--muted2);font-size:.74rem}
.adiv::before,.adiv::after{content:'';flex:1;height:1px;background:var(--border)}
.asw{text-align:center;font-size:.83rem;color:var(--muted)}
.asw a{color:var(--cream);text-decoration:none;font-weight:600;cursor:pointer}
.asw a:hover{text-decoration:underline}
.spin{width:14px;height:14px;border:2px solid rgba(0,0,0,.2);border-top-color:var(--black);border-radius:50%;animation:spinA .7s linear infinite;display:inline-block;vertical-align:middle;margin-right:7px}
@keyframes spinA{to{transform:rotate(360deg)}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QR CONNECT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.qr-wrap{flex:1;display:flex;align-items:center;justify-content:center;padding:40px 24px}
.qr-box{
  background:var(--black2);border:1px solid var(--border);
  border-radius:22px;padding:42px 36px;width:100%;max-width:440px;
  text-align:center;animation:riseIn .4s ease both;
}
.qr-h{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:var(--cream);margin-bottom:8px}
.qr-sub{color:var(--muted);font-size:.84rem;line-height:1.65;margin-bottom:24px;font-weight:300}
.qr-steps{display:flex;flex-direction:column;gap:10px;text-align:left;margin-bottom:20px}
.qrs{display:flex;align-items:flex-start;gap:12px}
.qrs-n{
  width:22px;height:22px;border-radius:50%;flex-shrink:0;margin-top:2px;
  background:var(--cream);color:var(--black);font-size:.68rem;font-weight:700;
  display:flex;align-items:center;justify-content:center;
}
.qrs-t{font-size:.81rem;color:var(--muted);line-height:1.55}
.qrs-t strong{color:var(--text)}
.qr-area{
  background:rgba(0,0,0,.5);border:1px dashed rgba(245,240,232,0.15);
  border-radius:16px;overflow:hidden;min-height:250px;
  display:flex;align-items:center;justify-content:center;
  position:relative;margin-bottom:16px;
}
.qrc{position:absolute;width:20px;height:20px;border-color:var(--sage);border-style:solid;opacity:.7}
.qcTL{top:10px;left:10px;border-width:2px 0 0 2px;border-radius:2px 0 0 0}
.qcTR{top:10px;right:10px;border-width:2px 2px 0 0;border-radius:0 2px 0 0}
.qcBL{bottom:10px;left:10px;border-width:0 0 2px 2px;border-radius:0 0 0 2px}
.qcBR{bottom:10px;right:10px;border-width:0 2px 2px 0;border-radius:0 0 2px 0}
.qr-ph{display:flex;flex-direction:column;align-items:center;gap:9px;color:var(--muted);font-size:.82rem;padding:32px 20px}
.qr-ph-ico{font-size:2.5rem}
#qr-reader{width:100%;display:none}
.btn-scan{
  width:100%;padding:12px;border-radius:10px;border:none;cursor:pointer;
  background:var(--cream);color:var(--black);
  font-family:'Jost',sans-serif;font-size:.92rem;font-weight:600;
  letter-spacing:.04em;transition:all .22s;
}
.btn-scan:hover{background:var(--white);transform:translateY(-1px)}
.qr-manual{margin-top:13px;font-size:.78rem;color:var(--muted)}
.qr-manual a{color:var(--cream);cursor:pointer;font-weight:500}
.qr-ok{display:none;flex-direction:column;align-items:center;gap:13px;padding:14px 0}
.qr-ok.show{display:flex}
.qr-ok-ico{font-size:3rem;animation:popIn .4s cubic-bezier(.175,.885,.32,1.275)}
@keyframes popIn{from{transform:scale(0)}to{transform:scale(1)}}
.qr-ok-id{font-family:'Cormorant Garamond',serif;font-size:1.1rem;color:var(--sage);letter-spacing:.08em}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.dash-wrap{display:grid;grid-template-columns:230px 1fr;min-height:calc(100vh - 65px)}

/* Sidebar */
.sb{
  background:rgba(0,0,0,.4);border-right:1px solid rgba(245,240,232,0.06);
  padding:24px 14px;display:flex;flex-direction:column;gap:3px;
}
.sb-sec{font-size:.58rem;letter-spacing:.2em;text-transform:uppercase;color:var(--muted2);padding:5px 11px;margin-top:14px}
.sbi{
  display:flex;align-items:center;gap:10px;padding:9px 12px;
  border-radius:9px;cursor:pointer;color:var(--muted);font-size:.84rem;
  transition:all .2s;border:1px solid transparent;
}
.sbi:hover{background:var(--card);color:var(--text)}
.sbi.on{background:rgba(245,240,232,0.06);border-color:var(--border);color:var(--cream)}
.sbi-ico{width:16px;text-align:center;font-size:.85rem}
.sb-dev{
  margin-top:auto;padding:14px;background:rgba(0,0,0,0.4);
  border:1px solid var(--border);border-radius:12px;
}
.sbdl{font-size:.6rem;letter-spacing:.1em;text-transform:uppercase;color:var(--muted2)}
.sbdv{font-family:'Cormorant Garamond',serif;font-weight:600;color:var(--cream);font-size:.88rem;margin-top:3px}
.sbds{display:flex;align-items:center;gap:6px;margin-top:6px;font-size:.7rem;color:var(--muted)}
.sdot{width:5px;height:5px;border-radius:50%;background:#69f0ae;box-shadow:0 0 5px #69f0ae;animation:leafpulse 2s ease-in-out infinite}
.sb-fp{
  display:flex;align-items:center;justify-content:space-between;
  padding:9px 12px;border-radius:9px;font-size:.76rem;margin-top:8px;
  background:rgba(0,0,0,0.3);border:1px solid var(--border);cursor:pointer;
}
.sb-fp-l{color:var(--muted)}
.sb-fp-v{color:var(--sage);font-weight:600;transition:color var(--T)}

/* Main */
.dm{padding:26px 32px;overflow-y:auto;display:flex;flex-direction:column;gap:18px}
.dh{display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:12px}
.dh-l h2{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:700;color:var(--cream)}
.dh-l p{color:var(--muted);font-size:.81rem;margin-top:2px}
.dh-t{background:var(--card);border:1px solid var(--border);border-radius:9px;padding:7px 14px;font-size:.77rem;color:var(--muted);backdrop-filter:blur(12px)}

/* Sim strip */
.sim-strip{
  display:flex;gap:7px;flex-wrap:wrap;align-items:center;
  padding:10px 14px;background:rgba(0,0,0,0.25);
  border:1px solid var(--border);border-radius:10px;
}
.sim-l{font-size:.64rem;color:var(--muted2);letter-spacing:.12em;text-transform:uppercase}
.sbt{
  padding:4px 12px;border-radius:100px;font-family:'Jost',sans-serif;
  font-size:.71rem;cursor:pointer;transition:all .2s;
  border:1px solid currentColor;background:transparent;
}
.sbt:hover{opacity:.8;transform:translateY(-1px)}

/* Top 3-col grid */
.top3{display:grid;grid-template-columns:240px 1fr 1fr;gap:14px;align-items:start}

/* AQI card â€” editorial large number */
.aqi-card{
  background:var(--black2);border:1px solid var(--border);
  border-radius:var(--r);padding:28px 22px;
  display:flex;flex-direction:column;align-items:center;gap:14px;
  position:relative;overflow:hidden;
}
.aqi-card::before{
  content:'';position:absolute;width:280px;height:280px;border-radius:50%;
  background:radial-gradient(circle,var(--aqi-c) 0%,transparent 65%);
  top:-80px;left:50%;transform:translateX(-50%);
  opacity:.09;filter:blur(30px);transition:background var(--T);pointer-events:none;
}
.ac-lbl{font-size:.6rem;letter-spacing:.18em;text-transform:uppercase;color:var(--muted2)}
.ac-ring{position:relative;width:180px;height:180px}
.ar-svg{width:100%;height:100%;transform:rotate(-135deg)}
.ar-track{fill:none;stroke:rgba(245,240,232,0.06);stroke-width:12;stroke-linecap:round}
.ar-fill{fill:none;stroke:var(--aqi-c);stroke-width:12;stroke-linecap:round;stroke-dasharray:471;stroke-dashoffset:471;filter:drop-shadow(0 0 8px var(--aqi-c));transition:stroke-dashoffset 2s cubic-bezier(.4,0,.2,1),stroke var(--T),filter var(--T)}
.ar-mid{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.ar-num{font-family:'Cormorant Garamond',serif;font-size:3.2rem;font-weight:700;line-height:1;color:var(--cream)}
.ar-u{font-size:.58rem;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);margin-top:1px}
.aqi-pill{
  padding:5px 15px;border-radius:100px;font-size:.75rem;font-weight:600;
  letter-spacing:.08em;text-transform:uppercase;
  background:var(--aqi-c);color:var(--aqi-text);
  transition:background var(--T),color var(--T);
}
.aqi-adv{font-size:.76rem;color:var(--muted);text-align:center;line-height:1.65;padding:0 4px}
.aqi-scale-mini{width:100%}
.asm-bar{display:flex;border-radius:100px;overflow:hidden;height:4px}
.asm-lbls{display:flex;justify-content:space-between;margin-top:4px}
.asm-lbl{font-size:.56rem;color:var(--muted2)}

/* Filter health card */
.fc{
  background:var(--black2);border:1px solid var(--border);
  border-radius:var(--r);padding:24px 22px;
  display:flex;flex-direction:column;gap:14px;
}
.fc-h{display:flex;align-items:center;justify-content:space-between}
.fc-title{font-family:'Cormorant Garamond',serif;font-size:1rem;font-weight:600;color:var(--cream)}
.fc-big{font-family:'Cormorant Garamond',serif;font-size:2.8rem;font-weight:700;line-height:1;color:var(--cream);transition:color var(--T)}
.fc-big-l{font-size:.62rem;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-top:2px}
.fc-track{height:6px;background:rgba(245,240,232,0.07);border-radius:100px;overflow:hidden;margin-bottom:4px}
.fc-fill{height:100%;border-radius:100px;transition:width 1.4s ease,background var(--T)}
.fc-bl{display:flex;justify-content:space-between;font-size:.64rem;color:var(--muted2)}
.fc-msg{font-size:.77rem;padding:9px 12px;border-radius:9px;line-height:1.5}
.fc-good{background:rgba(138,158,122,0.1);border:1px solid rgba(138,158,122,0.2);color:var(--sage)}
.fc-warn{background:rgba(255,152,0,0.08);border:1px solid rgba(255,152,0,0.22);color:#ffb74d}
.fc-crit{background:rgba(244,67,54,0.08);border:1px solid rgba(244,67,54,0.22);color:#ff7043}

/* Real 5 layer list in filter card */
.fc-layers{display:flex;flex-direction:column;gap:6px}
.fcl{
  display:flex;align-items:center;justify-content:space-between;
  padding:7px 10px;border-radius:8px;background:rgba(0,0,0,0.3);
  border-left:2px solid;font-size:.75rem;
}
.fcl-left{display:flex;align-items:center;gap:8px;color:var(--muted)}
.fcl-ico{font-size:.9rem}
.fcl-pct{font-weight:600}
/* layer border colours */
.fc-l1{border-color:#9e9e9e} /* Activated Carbon â€” grey */
.fc-l2{border-color:#795548} /* Soil+Cocopeat â€” brown */
.fc-l3{border-color:#bdbdbd} /* HEPA â€” light grey */
.fc-l4{border-color:#90caf9} /* LECA â€” blue */
.fc-l5{border-color:var(--sage)} /* Plant roots â€” sage */

/* Auto toggle */
.auto-row{
  display:flex;align-items:center;justify-content:space-between;
  background:rgba(0,0,0,0.25);border:1px solid var(--border);
  border-radius:9px;padding:10px 13px;font-size:.78rem;
}
.ar-l{display:flex;align-items:center;gap:7px;color:var(--muted)}
.ar-l strong{color:var(--text)}
.tgl{position:relative;width:36px;height:19px}
.tgl input{opacity:0;width:0;height:0}
.tgl-s{position:absolute;inset:0;border-radius:100px;background:rgba(245,240,232,0.1);cursor:pointer;transition:.3s;border:1px solid rgba(245,240,232,0.1)}
.tgl-s::before{content:'';position:absolute;width:13px;height:13px;left:2px;bottom:2px;border-radius:50%;background:#555;transition:.3s}
.tgl input:checked+.tgl-s{background:rgba(138,158,122,0.25);border-color:var(--sage)}
.tgl input:checked+.tgl-s::before{transform:translateX(17px);background:var(--sage)}

/* Pollutants card */
.pc{
  background:var(--black2);border:1px solid var(--border);
  border-radius:var(--r);padding:24px 22px;
}
.pc-title{font-family:'Cormorant Garamond',serif;font-size:1rem;font-weight:600;color:var(--cream);margin-bottom:14px}
.pi{display:flex;align-items:center;justify-content:space-between;padding:7px 0;border-bottom:1px solid rgba(245,240,232,0.05)}
.pi:last-child{border-bottom:none}
.pi-n{font-size:.78rem;color:var(--muted)}
.pi-v{font-family:'Cormorant Garamond',serif;font-size:.98rem;font-weight:600;color:var(--cream)}
.pi-u{font-size:.65rem;color:var(--muted);margin-left:2px}
.pi-bar{width:60px;height:3px;background:rgba(245,240,232,0.07);border-radius:100px;overflow:hidden}
.pi-fill{height:100%;border-radius:100px;background:var(--sage);transition:width .9s ease,background var(--T)}

/* Bottom row */
.bot2{display:grid;grid-template-columns:1fr 290px;gap:14px}
.chart-card{background:var(--black2);border:1px solid var(--border);border-radius:var(--r);padding:22px}
.chart-hdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.chart-title{font-family:'Cormorant Garamond',serif;font-size:1rem;font-weight:600;color:var(--cream)}
.ctabs{display:flex;gap:5px}
.ct{
  padding:5px 13px;border-radius:100px;border:1px solid var(--border);
  background:transparent;color:var(--muted);
  font-family:'Jost',sans-serif;font-size:.72rem;cursor:pointer;transition:all .2s;
}
.ct.on{background:var(--cream);color:var(--black);border-color:transparent;font-weight:600}
.csv{width:100%;height:120px}
.cl{fill:none;stroke:var(--aqi-c);stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:stroke var(--T)}
.caf{opacity:.12}
.cdot{fill:var(--aqi-c);transition:fill var(--T);filter:drop-shadow(0 0 4px var(--aqi-c))}
.clbls{display:flex;justify-content:space-between;margin-top:4px}
.cll{font-size:.64rem;color:var(--muted2)}

/* Tips card */
.tips-card{background:var(--black2);border:1px solid var(--border);border-radius:var(--r);padding:22px}
.tips-title{font-family:'Cormorant Garamond',serif;font-size:1rem;font-weight:600;color:var(--cream);margin-bottom:12px}
.tip{display:flex;gap:8px;align-items:flex-start;padding:6px 0;border-bottom:1px solid rgba(245,240,232,0.05);font-size:.78rem;color:var(--muted);line-height:1.55}
.tip:last-child{border-bottom:none}

/* live badge */
.live-b{display:flex;align-items:center;gap:5px;background:rgba(245,240,232,0.05);border:1px solid var(--border);padding:5px 12px;border-radius:100px;font-size:.72rem;color:var(--muted)}

/* â•â• TOAST â•â• */
.toast{
  position:fixed;bottom:26px;left:50%;transform:translateX(-50%) translateY(14px);
  background:rgba(26,28,26,0.97);backdrop-filter:blur(16px);
  border:1px solid var(--border);border-radius:11px;padding:10px 20px;
  font-size:.82rem;z-index:1000;opacity:0;transition:all .35s;
  pointer-events:none;white-space:nowrap;color:var(--cream);
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

@keyframes riseIn{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}

/* â•â• RESPONSIVE â•â• */
@media(max-width:1020px){
  .hero-split{grid-template-columns:1fr;gap:40px}.device-card{max-width:380px;margin:0 auto}
  .feat-grid{grid-template-columns:repeat(2,1fr)}
  .fs-grid{grid-template-columns:1fr;gap:32px}.stack-visual{position:static}
  .how-row{grid-template-columns:repeat(2,1fr)}
  .top3{grid-template-columns:1fr 1fr;}.top3 .aqi-card{grid-column:1/-1;flex-direction:row;gap:20px;align-items:center}
  .bot2{grid-template-columns:1fr}
}
@media(max-width:760px){
  nav{padding:14px 20px}
  .hero{padding:52px 20px 40px}
  .dm{padding:14px 16px}
  .dash-wrap{grid-template-columns:1fr}.sb{display:none}
  .top3{grid-template-columns:1fr}.top3 .aqi-card{flex-direction:column}
  .auth-box{padding:30px 20px}.frow{grid-template-columns:1fr}
  .feat-grid{grid-template-columns:1fr}
  .how-row{grid-template-columns:1fr;background:none;gap:1px}
}
@media(max-width:460px){
  .hero-h1{font-size:2.6rem}.hero-btns{flex-direction:column}
  .fs-stats{gap:16px}.how-row{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div class="bg">
  <div class="bg-b b1"></div><div class="bg-b b2"></div><div class="bg-b b3"></div>
  <!-- Botanical SVG overlay -->
  <div class="bg-leaves">
    <svg viewBox="0 0 1440 900" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
      <g stroke="#8a9e7a" stroke-width="0.5" fill="none" opacity="1">
        <!-- Large leaf left -->
        <path d="M-60 400 Q200 100 300 400 Q200 700 -60 400z"/>
        <path d="M120 400 Q200 200 280 400"/><path d="M120 400 Q200 600 280 400"/>
        <path d="M80 350 Q200 250 260 370"/><path d="M100 430 Q200 500 270 420"/>
        <!-- Large leaf right -->
        <path d="M1500 200 Q1200 50 1100 300 Q1200 550 1500 200z"/>
        <path d="M1350 230 Q1200 150 1140 280"/><path d="M1340 300 Q1200 380 1160 260"/>
        <!-- Bottom leaf -->
        <path d="M700 950 Q800 700 900 900 Q800 1100 700 950z"/>
        <path d="M740 920 Q800 760 870 880"/>
        <!-- Stem lines -->
        <path d="M250 900 Q260 600 290 400"/>
        <path d="M1180 800 Q1190 550 1200 300"/>
      </g>
    </svg>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LANDING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page active" id="pg-land">
  <nav>
    <a class="logo" onclick="goPage('pg-land')">
      <div class="logo-icon">ğŸŒ¿</div>
      <div class="logo-words">
        <span class="logo-name">PranaVayu</span>
        <span class="logo-sub">Bio-Filter Â· Air Purifier</span>
      </div>
    </a>
    <div class="nav-r">
      <button class="nb" onclick="goPage('pg-login')">Sign In</button>
      <button class="nb fill" onclick="goPage('pg-reg')">Get Started</button>
    </div>
  </nav>

  <div class="hero">
    <!-- Hero split -->
    <div class="hero-split">
      <div class="hero-left">
        <div class="hero-kicker"><span class="kicker-leaf"></span>Nature Â· Technology Â· Clean Air</div>
        <h1 class="hero-h1">
          Breathe the air<br>
          <em>plants were</em><br>
          <span class="hl">born to clean.</span>
        </h1>
        <p class="hero-p">PranaVayu is a living bio-filter air purifier that monitors your AQI in real-time. When pollution rises, it auto-activates â€” passing air through 5 natural layers to deliver clean, breathable air.</p>
        <div class="hero-btns">
          <button class="btn-blk" onclick="goPage('pg-reg')">Start Breathing Better</button>
          <button class="btn-line" onclick="goPage('pg-login')">Sign In</button>
        </div>
        <div class="proof">
          <div class="proof-i"><span class="proof-dot"></span>5-Layer Bio-Filter</div>
          <div class="proof-i"><span class="proof-dot"></span>Auto-Activates on Bad AQI</div>
          <div class="proof-i"><span class="proof-dot"></span>Real-Time Firebase Sync</div>
          <div class="proof-i"><span class="proof-dot"></span>QR Device Connect</div>
        </div>
      </div>

      <!-- Device card -->
      <div>
        <div class="device-card">
          <div class="dc-top">
            <div class="dc-name">PranaVayu</div>
            <div class="dc-live"><span class="dc-dot"></span>Live</div>
          </div>
          <div class="dc-aqi-big">
            <span class="dc-aqi-num" id="lp-num">35</span>
            <div class="dc-aqi-label">Air Quality Index</div>
            <div><span class="dc-status-pill" id="lp-pill">Good</span></div>
          </div>
          <div class="dc-filter">
            <div class="dcf-top">
              <div class="dcf-lbl">ğŸŒ¿ Bio-Filter Health</div>
              <div class="dcf-pct" id="lp-fpct">78%</div>
            </div>
            <div class="dcf-track">
              <div class="dcf-fill" id="lp-fbar" style="width:78%"></div>
            </div>
          </div>
          <div class="dc-stats">
            <div class="dcs"><div class="dcs-v">24Â°C</div><div class="dcs-l">Temp</div></div>
            <div class="dcs"><div class="dcs-v">58%</div><div class="dcs-l">Humid</div></div>
            <div class="dcs"><div class="dcs-v" id="lp-pm">12.4</div><div class="dcs-l">PM2.5</div></div>
          </div>
          <div class="auto-pill" id="lp-auto">
            <span>âš¡</span>
            <span id="lp-auto-txt">Bio-filter in <span>rest mode</span> â€” air is clean</span>
          </div>
        </div>
      </div>
    </div><!-- /hero-split -->

    <!-- Features -->
    <div class="sec">
      <div class="sec-eyebrow">What PranaVayu does</div>
      <div class="feat-grid">
        <div class="feat">
          <div class="feat-num">01</div>
          <span class="feat-ico">ğŸŒ¿</span>
          <div class="feat-t">5-Layer Bio-Filtration</div>
          <div class="feat-d">Air passes through Activated Carbon, Soil+Cocopeat, HEPA, LECA, and a Live Plant Root zone â€” removing PM2.5, PM10, COâ‚‚, and VOCs naturally.</div>
        </div>
        <div class="feat">
          <div class="feat-num">02</div>
          <span class="feat-ico">âš¡</span>
          <div class="feat-t">Auto-Activates on Bad AQI</div>
          <div class="feat-d">ESP32 sensors detect AQI in real-time. When it crosses 100, the bio-filter fan activates automatically. No app, no manual switch needed.</div>
        </div>
        <div class="feat">
          <div class="feat-num">03</div>
          <span class="feat-ico">ğŸ“Š</span>
          <div class="feat-t">Layer-by-Layer Filter Health</div>
          <div class="feat-d">Each of the 5 filter layers is monitored independently. Get alerted when individual layers need replacement â€” not a generic "replace filter" warning.</div>
        </div>
        <div class="feat">
          <div class="feat-num">04</div>
          <span class="feat-ico">ğŸ“²</span>
          <div class="feat-t">QR Device Connect</div>
          <div class="feat-d">No Device ID to type. After registering, scan the QR sticker on your device and it links instantly to your dashboard â€” 3 seconds flat.</div>
        </div>
      </div>
    </div>

    <!-- Real filter stack section -->
    <div class="filter-sec sec">
      <div class="sec-eyebrow">The 5-Layer Bio-Filter Stack</div>
      <div class="fs-grid">
        <div class="stack-visual">
          <div class="sv-title">Filter Stack â€” Air flow: bottom â†’ top</div>

          <div class="airflow-arrow"><div class="af-line"></div>â¬† Dirty Air In<div class="af-line"></div></div>

          <div class="layer-stack">
            <!-- Layer 1 -->
            <div class="layer" style="--lc:#9e9e9e">
              <div class="l-ico">ğŸª¨</div>
              <div class="l-info">
                <div class="l-name">Layer 1 â€” Activated Carbon</div>
                <div class="l-desc">First contact layer. Adsorbs VOCs, odours, formaldehyde and toxic gases at a molecular level through activated charcoal granules.</div>
              </div>
              <div class="l-tag">VOC Â· Odour</div>
            </div>
            <!-- Layer 2 -->
            <div class="layer" style="--lc:#795548">
              <div class="l-ico">ğŸŒ±</div>
              <div class="l-info">
                <div class="l-name">Layer 2 â€” Soil + Cocopeat</div>
                <div class="l-desc">Organic growing medium â€” coconut coir mixed with soil. Acts as a biological filter medium and moisture regulator. Supports microbial colonies that break down pollutants.</div>
              </div>
              <div class="l-tag">Biofilm Â· Moisture</div>
            </div>
            <!-- Layer 3 -->
            <div class="layer" style="--lc:#bdbdbd">
              <div class="l-ico">ğŸ”¬</div>
              <div class="l-info">
                <div class="l-name">Layer 3 â€” HEPA Filter</div>
                <div class="l-desc">High-Efficiency Particulate Air filter captures 99.97% of particles â‰¥0.3Î¼m â€” PM2.5, PM10, dust, pollen, and fine aerosols that pass earlier layers.</div>
              </div>
              <div class="l-tag">PM2.5 Â· PM10</div>
            </div>
            <!-- Layer 4 -->
            <div class="layer" style="--lc:#90caf9">
              <div class="l-ico">ğŸ”µ</div>
              <div class="l-info">
                <div class="l-name">Layer 4 â€” LECA Granules</div>
                <div class="l-desc">Lightweight Expanded Clay Aggregate â€” porous clay balls that hold water, support root growth, and act as a final mechanical particulate trap before the plant zone.</div>
              </div>
              <div class="l-tag">Support Â· Trap</div>
            </div>
            <!-- Layer 5 -->
            <div class="layer" style="--lc:#8a9e7a">
              <div class="l-ico">ğŸŒ¿</div>
              <div class="l-info">
                <div class="l-name">Layer 5 â€” Live Plant Root Zone</div>
                <div class="l-desc">Living plant roots (pothos, peace lily, or spider plant) absorb COâ‚‚, benzene and toluene. The rhizosphere microbiome actively metabolises residual toxins.</div>
              </div>
              <div class="l-tag">COâ‚‚ Â· Benzene</div>
            </div>
          </div>

          <div class="airflow-arrow"><div class="af-line"></div>â¬† Clean Air Out<div class="af-line"></div></div>
        </div>

        <div class="fs-text">
          <h2 class="fs-h">Five layers.<br><em>One breath</em> at a time.</h2>
          <p class="fs-p">Most air purifiers do one thing â€” trap particles in a HEPA filter and call it done. PranaVayu's bio-filter stack targets every category of indoor air pollutant across 5 distinct mechanisms: adsorption, bioremediation, mechanical filtration, structural support, and living plant metabolism.</p>
          <p class="fs-p" style="font-size:.82rem">The result is cleaner air with lower energy, no chemical off-gassing, and a filter system that partially regenerates itself â€” because the plants and microorganisms are alive.</p>
          <div class="fs-stats">
            <div class="fss"><div class="fss-v">5</div><div class="fss-l">Active Layers</div></div>
            <div class="fss"><div class="fss-v">99.97%</div><div class="fss-l">PM capture (HEPA)</div></div>
            <div class="fss"><div class="fss-v">6 mo</div><div class="fss-l">Filter Lifespan</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- How it works -->
    <div class="how-sec sec">
      <div class="sec-eyebrow">Getting started</div>
      <div class="how-row">
        <div class="how-step"><div class="hs-n">01</div><span class="hs-ico">ğŸ“¦</span><div class="hs-t">Get Your Device</div><div class="hs-d">Order PranaVayu. The bio-filter is pre-seeded and ready. A QR code sticker is on the base of the unit.</div></div>
        <div class="how-step"><div class="hs-n">02</div><span class="hs-ico">ğŸ‘¤</span><div class="hs-t">Create Account</div><div class="hs-d">Register free with your name and email. No Device ID needed â€” just your account details.</div></div>
        <div class="how-step"><div class="hs-n">03</div><span class="hs-ico">ğŸ“²</span><div class="hs-t">Scan QR Code</div><div class="hs-d">After login, use the QR scanner to scan the sticker on your device. It links instantly in seconds.</div></div>
        <div class="how-step"><div class="hs-n">04</div><span class="hs-ico">ğŸŒ¬ï¸</span><div class="hs-t">Breathe Better</div><div class="hs-d">Live AQI, layer-by-layer filter health, and auto-purification â€” all on your dashboard.</div></div>
      </div>
    </div>

    <!-- AQI scale -->
    <div class="aqi-band">
      <div class="aqi-band-title">AQI Response Scale</div>
      <div class="aqi-bar"><div class="ab ab1"></div><div class="ab ab2"></div><div class="ab ab3"></div><div class="ab ab4"></div><div class="ab ab5"></div><div class="ab ab6"></div></div>
      <div class="aqi-lbls"><span class="aqi-lbl" style="color:#4caf50">Good 0â€“50</span><span class="aqi-lbl" style="color:#cddc39">Moderate</span><span class="aqi-lbl" style="color:#ff9800">Sensitive</span><span class="aqi-lbl" style="color:#f44336">Unhealthy</span><span class="aqi-lbl" style="color:#9c27b0">Very Unhealthy</span><span class="aqi-lbl" style="color:#ef5350">Hazardous</span></div>
      <div class="aqi-note">Bio-filter activates at AQI â‰¥ 100 &nbsp;Â·&nbsp; Maximum purification at AQI â‰¥ 200</div>
    </div>
  </div>
</div><!-- /landing -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LOGIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="pg-login">
  <nav>
    <a class="logo" onclick="goPage('pg-land')"><div class="logo-icon">ğŸŒ¿</div><div class="logo-words"><span class="logo-name">PranaVayu</span><span class="logo-sub">Bio-Filter Â· Air Purifier</span></div></a>
    <div class="nav-r"><button class="nb" onclick="goPage('pg-land')">â† Home</button><button class="nb fill" onclick="goPage('pg-reg')">Register</button></div>
  </nav>
  <div class="auth-wrap">
    <div class="auth-box">
      <div class="ab-logo"><div class="logo-icon" style="width:28px;height:28px;font-size:.85rem">ğŸŒ¿</div><span class="logo-name">PranaVayu</span></div>
      <h2 class="ab-h">Welcome back</h2>
      <p class="ab-sub">Sign in to view your air quality and bio-filter health</p>
      <div class="err-box" id="l-err"></div>
      <div class="fg"><label class="fl">Email</label><input class="fi" type="email" id="l-email" placeholder="you@example.com"></div>
      <div class="fg"><label class="fl">Password</label><input class="fi" type="password" id="l-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" onkeydown="if(event.key==='Enter')doLogin()"></div>
      <button class="btn-auth" id="l-btn" onclick="doLogin()">Sign In â†’</button>
      <div class="adiv">or</div>
      <div class="asw">New here? <a onclick="goPage('pg-reg')">Create your account</a></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     REGISTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="pg-reg">
  <nav>
    <a class="logo" onclick="goPage('pg-land')"><div class="logo-icon">ğŸŒ¿</div><div class="logo-words"><span class="logo-name">PranaVayu</span><span class="logo-sub">Bio-Filter Â· Air Purifier</span></div></a>
    <div class="nav-r"><button class="nb" onclick="goPage('pg-land')">â† Home</button><button class="nb" onclick="goPage('pg-login')">Sign In</button></div>
  </nav>
  <div class="auth-wrap">
    <div class="auth-box">
      <div class="ab-logo"><div class="logo-icon" style="width:28px;height:28px;font-size:.85rem">ğŸŒ¿</div><span class="logo-name">PranaVayu</span></div>
      <h2 class="ab-h">Create account</h2>
      <p class="ab-sub">Register free â€” scan your device QR after to link it instantly</p>
      <div class="err-box" id="r-err"></div>
      <div class="frow">
        <div class="fg"><label class="fl">First Name</label><input class="fi" type="text" id="r-fn" placeholder="Ravi"></div>
        <div class="fg"><label class="fl">Last Name</label><input class="fi" type="text" id="r-ln" placeholder="Kumar"></div>
      </div>
      <div class="fg"><label class="fl">Email</label><input class="fi" type="email" id="r-email" placeholder="you@example.com"></div>
      <div class="fg"><label class="fl">Password</label><input class="fi" type="password" id="r-pass" placeholder="Min. 8 characters" oninput="chkPw()"></div>
      <div class="fg">
        <label class="fl">Retype Password</label>
        <input class="fi" type="password" id="r-pass2" placeholder="Repeat your password" oninput="chkPw()" onkeydown="if(event.key==='Enter')doRegister()">
        <div class="pw-match" id="pw-msg"></div>
      </div>
      <button class="btn-auth" id="r-btn" onclick="doRegister()">Create Account â†’</button>
      <div class="asw" style="margin-top:16px">Already have an account? <a onclick="goPage('pg-login')">Sign in</a></div>
      <p style="text-align:center;font-size:.67rem;color:var(--muted2);margin-top:13px;line-height:1.65">After registering, scan the QR code on the base of your PranaVayu device to link it.</p>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     QR CONNECT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="pg-qr">
  <nav>
    <a class="logo"><div class="logo-icon">ğŸŒ¿</div><div class="logo-words"><span class="logo-name">PranaVayu</span><span class="logo-sub">Bio-Filter Â· Air Purifier</span></div></a>
    <div class="nav-r"><button class="nb" onclick="skipQR()">Skip for now</button></div>
  </nav>
  <div class="qr-wrap">
    <div class="qr-box">
      <div style="font-size:2rem;margin-bottom:12px">ğŸ“²</div>
      <h2 class="qr-h">Link Your Device</h2>
      <p class="qr-sub">Scan the QR sticker on the base of your PranaVayu to link it instantly to your account.</p>
      <div class="qr-steps">
        <div class="qrs"><div class="qrs-n">1</div><div class="qrs-t"><strong>Power on</strong> your PranaVayu and connect it to WiFi.</div></div>
        <div class="qrs"><div class="qrs-n">2</div><div class="qrs-t">Find the <strong>QR sticker</strong> on the base of the device.</div></div>
        <div class="qrs"><div class="qrs-n">3</div><div class="qrs-t">Tap <strong>Scan QR Code</strong> and point your camera at the sticker.</div></div>
      </div>
      <div class="qr-area" id="qr-area">
        <div class="qrc qcTL"></div><div class="qrc qcTR"></div><div class="qrc qcBL"></div><div class="qrc qcBR"></div>
        <div class="qr-ph" id="qr-ph"><div class="qr-ph-ico">ğŸ“·</div><div>Camera appears here</div></div>
        <div id="qr-reader"></div>
      </div>
      <div class="qr-ok" id="qr-ok">
        <div class="qr-ok-ico">âœ…</div>
        <div style="font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:700;color:var(--cream)">Device Linked!</div>
        <div class="qr-ok-id" id="qr-dev-id">PV-XXXX</div>
        <div style="font-size:.78rem;color:var(--muted)">Your PranaVayu is connected to your account</div>
        <button class="btn-scan" style="margin-top:8px" onclick="goPage('pg-dash');openDash()">Go to Dashboard â†’</button>
      </div>
      <div id="qr-btn-wrap">
        <button class="btn-scan" onclick="startQR()">ğŸ“· Scan QR Code</button>
        <div class="qr-manual">No QR? <a onclick="manualLink()">Enter Device ID manually</a></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="pg-dash">
  <nav>
    <a class="logo"><div class="logo-icon">ğŸŒ¿</div><div class="logo-words"><span class="logo-name">PranaVayu</span><span class="logo-sub">Bio-Filter Â· Air Purifier</span></div></a>
    <div class="nav-r"><div class="live-b"><div class="sdot"></div>Live</div><button class="nb" onclick="doLogout()">Sign Out</button></div>
  </nav>

  <div class="dash-wrap">
    <aside class="sb">
      <div class="sbi on"><span class="sbi-ico">ğŸ </span>Dashboard</div>
      <div class="sbi"><span class="sbi-ico">ğŸ“Š</span>AQI History</div>
      <div class="sbi"><span class="sbi-ico">ğŸŒ¿</span>Filter Health</div>
      <div class="sbi"><span class="sbi-ico">ğŸ””</span>Alerts</div>
      <div class="sb-sec">Account</div>
      <div class="sbi"><span class="sbi-ico">ğŸ“²</span>Add Device</div>
      <div class="sbi"><span class="sbi-ico">ğŸ‘¤</span>Profile</div>
      <div class="sbi"><span class="sbi-ico">âš™ï¸</span>Settings</div>
      <div class="sb-dev">
        <div class="sbdl">Device</div>
        <div class="sbdv" id="sb-dev-id">â€”</div>
        <div class="sbds"><div class="sdot"></div>Online Â· Syncing</div>
      </div>
      <div class="sb-fp">
        <div class="sb-fp-l">ğŸŒ¿ Bio-Filter</div>
        <div class="sb-fp-v" id="sb-fp-v">78%</div>
      </div>
    </aside>

    <main class="dm">
      <!-- Header -->
      <div class="dh">
        <div class="dh-l"><h2>Hello, <span id="d-name">User</span> ğŸŒ¿</h2><p>Live AQI + bio-filter health from your device</p></div>
        <div class="dh-t" id="d-time">â€”</div>
      </div>

      <!-- Sim strip -->
      <div class="sim-strip">
        <span class="sim-l">Simulate AQI â†’</span>
        <button class="sbt" onclick="setAQI(35)"  style="color:#4caf50">35 Good</button>
        <button class="sbt" onclick="setAQI(105)" style="color:#cddc39">105 Moderate</button>
        <button class="sbt" onclick="setAQI(155)" style="color:#ff9800">155 Sensitive</button>
        <button class="sbt" onclick="setAQI(210)" style="color:#f44336">210 Unhealthy</button>
        <button class="sbt" onclick="setAQI(310)" style="color:#9c27b0">310 V.Unhealthy</button>
        <button class="sbt" onclick="setAQI(450)" style="color:#ef9a9a">450 Hazardous</button>
        <span class="sim-l" style="margin-left:6px">Filter â†’</span>
        <button class="sbt" onclick="setFilter(85)" style="color:#8a9e7a">85% Good</button>
        <button class="sbt" onclick="setFilter(42)" style="color:#ffb74d">42% Warn</button>
        <button class="sbt" onclick="setFilter(11)" style="color:#ff7043">11% Replace</button>
      </div>

      <!-- Top 3 col -->
      <div class="top3">
        <!-- AQI gauge -->
        <div class="aqi-card">
          <div class="ac-lbl">Air Quality Index</div>
          <div class="ac-ring">
            <svg class="ar-svg" viewBox="0 0 160 160">
              <circle class="ar-track" cx="80" cy="80" r="75" stroke-dasharray="471 628"/>
              <circle class="ar-fill" id="d-ring" cx="80" cy="80" r="75" stroke-dasharray="471 628"/>
            </svg>
            <div class="ar-mid">
              <div class="ar-num" id="d-aqi">--</div>
              <div class="ar-u">AQI</div>
            </div>
          </div>
          <div class="aqi-pill" id="d-badge">--</div>
          <div class="aqi-adv" id="d-adv">Connecting...</div>
          <div class="aqi-scale-mini">
            <div class="asm-bar"><div class="ab ab1"></div><div class="ab ab2"></div><div class="ab ab3"></div><div class="ab ab4"></div><div class="ab ab5"></div><div class="ab ab6"></div></div>
            <div class="asm-lbls"><span class="asm-lbl">0</span><span class="asm-lbl">100</span><span class="asm-lbl">200</span><span class="asm-lbl">300</span><span class="asm-lbl">400</span><span class="asm-lbl">500</span></div>
          </div>
        </div>

        <!-- Bio-filter health -->
        <div class="fc">
          <div class="fc-h"><div class="fc-title">ğŸŒ¿ Bio-Filter Health</div></div>
          <div>
            <div class="fc-big" id="fc-pct">78%</div>
            <div class="fc-big-l">Overall Filter Life Remaining</div>
          </div>
          <div>
            <div class="fc-track"><div class="fc-fill" id="fc-bar" style="width:78%"></div></div>
            <div class="fc-bl"><span>Depleted</span><span>Full Life</span></div>
          </div>
          <div class="fc-msg fc-good" id="fc-msg">âœ… All 5 layers healthy. ~3.2 months remaining.</div>
          <!-- Real 5 layers -->
          <div class="fc-layers">
            <div class="fcl fc-l1"><div class="fcl-left"><span class="fcl-ico">ğŸª¨</span>Activated Carbon</div><span class="fcl-pct" id="fl1" style="color:#bdbdbd">88%</span></div>
            <div class="fcl fc-l2"><div class="fcl-left"><span class="fcl-ico">ğŸŒ±</span>Soil + Cocopeat</div><span class="fcl-pct" id="fl2" style="color:#a1887f">72%</span></div>
            <div class="fcl fc-l3"><div class="fcl-left"><span class="fcl-ico">ğŸ”¬</span>HEPA Layer</div><span class="fcl-pct" id="fl3" style="color:#e0e0e0">81%</span></div>
            <div class="fcl fc-l4"><div class="fcl-left"><span class="fcl-ico">ğŸ”µ</span>LECA Granules</div><span class="fcl-pct" id="fl4" style="color:#90caf9">76%</span></div>
            <div class="fcl fc-l5"><div class="fcl-left"><span class="fcl-ico">ğŸŒ¿</span>Plant Root Zone</div><span class="fcl-pct" id="fl5" style="color:#8a9e7a">79%</span></div>
          </div>
          <div class="auto-row">
            <div class="ar-l">âš¡ <strong>Auto-activate</strong> when AQI &gt; 100</div>
            <label class="tgl"><input type="checkbox" checked id="auto-tog"><div class="tgl-s"></div></label>
          </div>
        </div>

        <!-- Pollutants -->
        <div class="pc">
          <div class="pc-title">Pollutants & Environment</div>
          <div class="pi"><div class="pi-n">PM2.5</div><div><span class="pi-v" id="p-pm25">12.4</span><span class="pi-u">Î¼g/mÂ³</span></div><div class="pi-bar"><div class="pi-fill" id="pb-pm25" style="width:12%"></div></div></div>
          <div class="pi"><div class="pi-n">PM10</div><div><span class="pi-v" id="p-pm10">28.1</span><span class="pi-u">Î¼g/mÂ³</span></div><div class="pi-bar"><div class="pi-fill" id="pb-pm10" style="width:18%"></div></div></div>
          <div class="pi"><div class="pi-n">COâ‚‚</div><div><span class="pi-v" id="p-co2">412</span><span class="pi-u">ppm</span></div><div class="pi-bar"><div class="pi-fill" id="pb-co2" style="width:30%"></div></div></div>
          <div class="pi"><div class="pi-n">VOC</div><div><span class="pi-v" id="p-voc">0.18</span><span class="pi-u">mg/mÂ³</span></div><div class="pi-bar"><div class="pi-fill" id="pb-voc" style="width:8%"></div></div></div>
          <div class="pi"><div class="pi-n">Temperature</div><div><span class="pi-v" id="p-tmp">24.2</span><span class="pi-u">Â°C</span></div><div class="pi-bar"><div class="pi-fill" style="width:48%;background:#90caf9"></div></div></div>
          <div class="pi"><div class="pi-n">Humidity</div><div><span class="pi-v" id="p-hum">58</span><span class="pi-u">%</span></div><div class="pi-bar"><div class="pi-fill" style="width:58%;background:#80cbc4"></div></div></div>
        </div>
      </div>

      <!-- Bottom row -->
      <div class="bot2">
        <div class="chart-card">
          <div class="chart-hdr">
            <div class="chart-title">AQI History</div>
            <div class="ctabs">
              <button class="ct on" onclick="switchTab(this)">24h</button>
              <button class="ct" onclick="switchTab(this)">7d</button>
              <button class="ct" onclick="switchTab(this)">30d</button>
            </div>
          </div>
          <svg class="csv" viewBox="0 0 800 120" preserveAspectRatio="none">
            <defs>
              <linearGradient id="cg" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="var(--aqi-c)" stop-opacity=".5"/>
                <stop offset="100%" stop-color="var(--aqi-c)" stop-opacity="0"/>
              </linearGradient>
            </defs>
            <path id="c-fill" fill="url(#cg)" class="caf" d=""/>
            <path class="cl" id="c-line" d=""/>
            <circle class="cdot" id="c-dot" r="4" cx="0" cy="0"/>
          </svg>
          <div class="clbls"><span class="cll">00:00</span><span class="cll">04:00</span><span class="cll">08:00</span><span class="cll">12:00</span><span class="cll">16:00</span><span class="cll">20:00</span><span class="cll">Now</span></div>
        </div>
        <div class="tips-card">
          <div class="tips-title">Advice</div>
          <div id="d-tips"></div>
        </div>
      </div>
    </main>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FIREBASE CONFIG â€” replace below
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FB={
  apiKey:"YOUR_API_KEY",
  authDomain:"YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL:"https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId:"YOUR_PROJECT_ID",
  storageBucket:"YOUR_PROJECT_ID.appspot.com",
  messagingSenderId:"YOUR_SENDER_ID",
  appId:"YOUR_APP_ID"
};
firebase.initializeApp(FB);
const auth=firebase.auth();
const db=firebase.database();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AQI LEVELS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const LVL=[
  {max:50, label:'Good',           c:'#4caf50', dk:true,
   adv:'Excellent air quality. Bio-filter in rest mode.',
   mode:'Rest Mode â€” conserving all 5 layers',
   tips:['âœ… All 5 filter layers at rest â€” extending their lifespan.','ğŸŒ¿ Great time to open windows alongside your device.','ğŸƒ Safe for all activities and outdoor exercise.']},
  {max:100,label:'Moderate',       c:'#c0ca33', dk:true,
   adv:'Acceptable quality. Bio-filter on standby.',
   mode:'Standby â€” ready to activate',
   tips:['ğŸŒ¿ Bio-filter on standby. Activated Carbon layer pre-loaded.','âš ï¸ Sensitive individuals consider limiting outdoor time.','ğŸ’§ Check Soil+Cocopeat layer moisture level.']},
  {max:150,label:'Sensitive',      c:'#ff9800', dk:true,
   adv:'Bio-filter auto-activated. HEPA + Carbon filtering.',
   mode:'âš¡ Active â€” Carbon + HEPA layers engaged',
   tips:['âš¡ HEPA and Activated Carbon layers now filtering PM2.5.','ğŸ˜· Sensitive groups: stay within range of your PranaVayu.','ğŸŒ¿ Monitor filter health â€” heavy use depletes Carbon first.']},
  {max:200,label:'Unhealthy',      c:'#f44336', dk:false,
   adv:'All 5 layers active at full capacity.',
   mode:'ğŸ”¥ Maximum â€” all 5 layers at full purification',
   tips:['ğŸ”¥ All 5 layers running: Carbon, Cocopeat, HEPA, LECA, Roots.','ğŸ  Stay within range of your device for clean air.','ğŸŒ¿ Check filter health â€” max mode accelerates layer wear.']},
  {max:300,label:'Very Unhealthy', c:'#9c27b0', dk:false,
   adv:'Emergency purification. All layers maxed.',
   mode:'ğŸ”´ Emergency â€” maximum throughput',
   tips:['ğŸš« Avoid outdoor activities. Stay close to PranaVayu.','ğŸ˜· Wear N95 if going outside is unavoidable.','ğŸŒ¿ HEPA and Carbon layers may need early replacement.']},
  {max:500,label:'Hazardous',      c:'#b71c1c', dk:false,
   adv:'HAZARDOUS â€” All layers at limit. Seek clean air.',
   mode:'ğŸš¨ Emergency Max â€” replace layers after this episode',
   tips:['ğŸš¨ Stay indoors immediately. Device at emergency mode.','ğŸ¥ Seek medical help for any breathing difficulty.','ğŸŒ¿ Expect to replace Carbon and HEPA layers after this event.']}
];
function lvl(v){return LVL.find(l=>v<=l.max)||LVL[5]}

let curAQI=35,filterPct=78,curUser=null,curDevice=null,liveUnsub=null,qrScan=null;

/* â•â•â•â• THEME â•â•â•â• */
function applyTheme(info){
  const r=document.documentElement;
  r.style.setProperty('--aqi-c',info.c);
  r.style.setProperty('--aqi-dim',info.c+'22');
  r.style.setProperty('--aqi-text',info.dk?'#080808':'#f5f0e8');
}

/* â•â•â•â• SET AQI â•â•â•â• */
function setAQI(v){
  curAQI=v;const info=lvl(v);
  applyTheme(info);

  /* gauge */
  document.getElementById('d-ring').style.strokeDashoffset=471-(v/500)*471;
  animNum('d-aqi',v,1100);
  document.getElementById('d-badge').textContent=info.label;
  document.getElementById('d-adv').textContent=info.adv;

  /* pollutants */
  const f=Math.max(.07,v/50);
  const pm25=(12.4*f).toFixed(1),pm10=(28.1*f).toFixed(1),
        co2=Math.round(400+v*.38),voc=(0.18*f).toFixed(2);
  document.getElementById('p-pm25').textContent=pm25;
  document.getElementById('p-pm10').textContent=pm10;
  document.getElementById('p-co2').textContent=co2;
  document.getElementById('p-voc').textContent=voc;
  document.getElementById('p-tmp').textContent=(24+(Math.random()-.5)*1.5).toFixed(1);
  document.getElementById('p-hum').textContent=Math.round(55+(Math.random()-.5)*8);
  document.getElementById('pb-pm25').style.width=Math.min(100,(pm25/250)*100)+'%';
  document.getElementById('pb-pm10').style.width=Math.min(100,(pm10/430)*100)+'%';
  document.getElementById('pb-co2').style.width=Math.min(100,((co2-350)/1150)*100)+'%';
  document.getElementById('pb-voc').style.width=Math.min(100,(voc/.5)*100)+'%';
  ['pb-pm25','pb-pm10','pb-co2','pb-voc'].forEach(id=>document.getElementById(id).style.background=info.c);

  /* tips with filter mode */
  document.getElementById('d-tips').innerHTML=[
    `<div class="tip">ğŸŒ¿ <span style="color:var(--cream)">Filter: </span><em style="color:var(--aqi-c)">${info.mode}</em></div>`,
    ...info.tips.map(t=>`<div class="tip"><span style="margin-right:6px">${t.slice(0,2)}</span>${t.slice(3)}</div>`)
  ].join('');

  /* landing device card */
  document.getElementById('lp-num').textContent=v;
  document.getElementById('lp-num').style.color=info.c;
  document.getElementById('lp-num').style.textShadow=`0 0 60px ${info.c}40`;
  document.getElementById('lp-pill').textContent=info.label;
  document.getElementById('lp-pill').style.background=info.c;
  document.getElementById('lp-pill').style.color=info.dk?'#080808':'#f5f0e8';
  document.getElementById('lp-pm').textContent=pm25;
  /* auto pill text */
  const apt=document.getElementById('lp-auto-txt');
  if(v>=200) apt.innerHTML=`Bio-filter at <span>maximum purification</span> â€” ${v} AQI`;
  else if(v>=100) apt.innerHTML=`Bio-filter <span>auto-activated</span> â€” AQI above 100`;
  else apt.innerHTML=`Bio-filter in <span>rest mode</span> â€” air quality good`;

  drawChart(genData(v));
  toast('AQI '+v+' â€” '+info.label);
}

/* â•â•â•â• SET FILTER â•â•â•â• */
function setFilter(pct){
  filterPct=pct;
  document.getElementById('fc-pct').textContent=pct+'%';
  document.getElementById('sb-fp-v').textContent=pct+'%';
  document.getElementById('lp-fpct').textContent=pct+'%';
  document.getElementById('lp-fbar').style.width=pct+'%';

  let barBg,msgCls,msgTxt,pctCol,fbarBg;
  if(pct>=60){
    barBg='linear-gradient(90deg,#8a9e7a,#b5c99a)';
    fbarBg='#8a9e7a'; msgCls='fc-good'; pctCol='var(--cream)';
    msgTxt=`âœ… All 5 layers healthy. ~${(pct/100*6).toFixed(1)} months remaining.`;
  }else if(pct>=25){
    barBg='linear-gradient(90deg,#ff9800,#ffd54f)';
    fbarBg='#ff9800'; msgCls='fc-warn'; pctCol='#ffb74d';
    msgTxt=`âš ï¸ Below 60% â€” order replacement layers soon.`;
  }else{
    barBg='linear-gradient(90deg,#f44336,#ff7043)';
    fbarBg='#f44336'; msgCls='fc-crit'; pctCol='#ff7043';
    msgTxt=`ğŸš¨ Critical: Replace layers now â€” purification severely reduced.`;
  }
  const bar=document.getElementById('fc-bar');
  bar.style.width=pct+'%'; bar.style.background=barBg;
  document.getElementById('lp-fbar').style.background=fbarBg;
  document.getElementById('fc-pct').style.color=pctCol;
  document.getElementById('sb-fp-v').style.color=pctCol;
  document.getElementById('lp-fpct').style.color=pctCol;
  const msg=document.getElementById('fc-msg');
  msg.className='fc-msg '+msgCls; msg.textContent=msgTxt;

  /* 5 layer percentages */
  const layers=[
    {id:'fl1',v:Math.min(100,pct+10),base:'#bdbdbd'},
    {id:'fl2',v:Math.min(100,pct-6), base:'#a1887f'},
    {id:'fl3',v:Math.min(100,pct+3), base:'#e0e0e0'},
    {id:'fl4',v:Math.min(100,pct-2), base:'#90caf9'},
    {id:'fl5',v:Math.min(100,pct+1), base:'#8a9e7a'}
  ];
  layers.forEach(l=>{
    const p=Math.max(0,l.v);
    const el=document.getElementById(l.id);
    el.textContent=p+'%';
    el.style.color=p>=60?l.base:p>=25?'#ffb74d':'#ff7043';
  });
  toast('Filter health: '+pct+'%');
}

/* â•â•â•â• PASSWORD MATCH CHECK â•â•â•â• */
function chkPw(){
  const p1=document.getElementById('r-pass').value;
  const p2=document.getElementById('r-pass2').value;
  const el=document.getElementById('pw-msg');
  if(!p2){el.className='pw-match';return}
  el.className='pw-match show';
  if(p1===p2){el.textContent='âœ“ Passwords match';el.className='pw-match show pw-ok'}
  else{el.textContent='âœ— Passwords do not match';el.className='pw-match show pw-no'}
}

/* â•â•â•â• AUTH â•â•â•â• */
async function doLogin(){
  const email=document.getElementById('l-email').value.trim();
  const pass=document.getElementById('l-pass').value;
  if(!email||!pass){showErr('l-err','Please fill in all fields.');return}
  const btn=document.getElementById('l-btn');
  btn.disabled=true;btn.innerHTML='<span class="spin"></span>Signing in...';
  try{
    const c=await auth.signInWithEmailAndPassword(email,pass);
    const s=await db.ref(`users/${c.user.uid}`).get();
    curUser=s.val()||{name:email.split('@')[0]};
    curDevice=Object.keys(curUser.devices||{})[0]||null;
    goPage('pg-dash');openDash();
  }catch(e){showErr('l-err',fbErr(e.code))}
  btn.disabled=false;btn.innerHTML='Sign In â†’';
}

async function doRegister(){
  const fn=document.getElementById('r-fn').value.trim();
  const email=document.getElementById('r-email').value.trim();
  const pass=document.getElementById('r-pass').value;
  const pass2=document.getElementById('r-pass2').value;
  if(!fn||!email||!pass){showErr('r-err','Please fill all required fields.');return}
  if(pass.length<8){showErr('r-err','Password must be at least 8 characters.');return}
  if(pass!==pass2){showErr('r-err','Passwords do not match. Please retype correctly.');return}
  const btn=document.getElementById('r-btn');
  btn.disabled=true;btn.innerHTML='<span class="spin"></span>Creating account...';
  try{
    const ln=document.getElementById('r-ln').value.trim();
    const c=await auth.createUserWithEmailAndPassword(email,pass);
    await c.user.updateProfile({displayName:`${fn} ${ln}`});
    await db.ref(`users/${c.user.uid}`).set({
      name:`${fn} ${ln}`,firstName:fn,lastName:ln,email,
      createdAt:firebase.database.ServerValue.TIMESTAMP,devices:{}
    });
    curUser={name:`${fn} ${ln}`,devices:{}};
    goPage('pg-qr');toast('Account created! Scan your device QR ğŸ“²');
  }catch(e){showErr('r-err',fbErr(e.code))}
  btn.disabled=false;btn.innerHTML='Create Account â†’';
}

async function doLogout(){
  if(liveUnsub)liveUnsub();
  await auth.signOut();
  curUser=null;curDevice=null;
  toast('Signed out');goPage('pg-land');
}

/* â•â•â•â• QR â•â•â•â• */
function startQR(){
  document.getElementById('qr-ph').style.display='none';
  document.getElementById('qr-reader').style.display='block';
  document.getElementById('qr-btn-wrap').style.display='none';
  qrScan=new Html5Qrcode('qr-reader');
  qrScan.start({facingMode:'environment'},{fps:10,qrbox:{width:200,height:200}},onQR,()=>{})
    .catch(()=>{
      toast('âš ï¸ Camera unavailable â€” use manual entry');
      document.getElementById('qr-ph').style.display='flex';
      document.getElementById('qr-reader').style.display='none';
      document.getElementById('qr-btn-wrap').style.display='block';
    });
}
async function onQR(text){
  const id=text.trim();
  if(qrScan)qrScan.stop().catch(()=>{});
  toast('Linking device...');
  try{
    const u=auth.currentUser;
    if(u){
      const s=await db.ref(`devices/${id}`).get();
      if(s.exists()&&s.val().ownerId&&s.val().ownerId!==u.uid){toast('âš ï¸ Device already linked to another account.');return}
      await db.ref(`devices/${id}`).update({ownerId:u.uid,linkedAt:firebase.database.ServerValue.TIMESTAMP});
      await db.ref(`users/${u.uid}/devices/${id}`).set(true);
      curDevice=id;
    }
    document.getElementById('qr-reader').style.display='none';
    document.getElementById('qr-btn-wrap').style.display='none';
    document.getElementById('qr-dev-id').textContent=id;
    document.getElementById('qr-ok').classList.add('show');
    toast('âœ… Linked: '+id);
  }catch(e){toast('Error: '+e.message)}
}
function manualLink(){const id=prompt('Enter Device ID (e.g. PV-XXXX):','');if(id&&id.trim())onQR(id.trim())}
function skipQR(){goPage('pg-dash');openDash()}

/* â•â•â•â• DASHBOARD â•â•â•â• */
function openDash(){
  const name=(curUser?.name||'User').split(' ')[0];
  document.getElementById('d-name').textContent=name;
  document.getElementById('sb-dev-id').textContent=curDevice||'No device linked';
  setAQI(35);setFilter(78);updateTime();
  if(curDevice&&auth.currentUser)listenLive(curDevice);
  if(!window._dt){
    setInterval(updateTime,1000);
    setInterval(()=>{if(!curDevice){curAQI=Math.max(5,Math.min(500,curAQI+(Math.random()-.5)*10));setAQI(Math.round(curAQI))}},11000);
    window._dt=true;
  }
}
function listenLive(did){
  if(liveUnsub)liveUnsub();
  const r=db.ref(`devices/${did}/readings`);
  const h=r.limitToLast(1).on('value',s=>{
    if(!s.exists())return;
    const d=Object.values(s.val())[0];
    if(d.aqi)setAQI(Math.round(d.aqi));
    if(d.filterPct!==undefined)setFilter(Math.round(d.filterPct));
  });
  liveUnsub=()=>r.off('value',h);
}
auth.onAuthStateChanged(async u=>{
  if(u){const s=await db.ref(`users/${u.uid}`).get();if(s.exists()){curUser=s.val();curDevice=Object.keys(curUser.devices||{})[0]||null}}
});

/* â•â•â•â• CHART â•â•â•â• */
function genData(c){return Array.from({length:25},(_,i)=>i===24?c:Math.max(5,Math.min(500,c+(Math.random()-.5)*32)))}
function drawChart(d){
  const W=800,H=120,P=12;
  const pts=d.map((v,i)=>[P+(i/(d.length-1))*(W-P*2),H-P-(v/500)*(H-P*2)]);
  const ln=pts.map((p,i)=>`${i?'L':'M'}${p[0].toFixed(1)},${p[1].toFixed(1)}`).join(' ');
  document.getElementById('c-line').setAttribute('d',ln);
  document.getElementById('c-fill').setAttribute('d',ln+` L${pts[pts.length-1][0]},${H} L${pts[0][0]},${H} Z`);
  document.getElementById('c-dot').setAttribute('cx',pts[pts.length-1][0]);
  document.getElementById('c-dot').setAttribute('cy',pts[pts.length-1][1]);
}
function switchTab(el){document.querySelectorAll('.ct').forEach(t=>t.classList.remove('on'));el.classList.add('on');drawChart(genData(curAQI))}

/* â•â•â•â• UTILS â•â•â•â• */
function goPage(id){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo(0,0)}
function animNum(id,target,dur){const el=document.getElementById(id);const s=parseInt(el.textContent)||0;const t0=performance.now();(function f(n){const p=Math.min(1,(n-t0)/dur);el.textContent=Math.round(s+(target-s)*(1-Math.pow(1-p,3)));if(p<1)requestAnimationFrame(f)})(performance.now())}
function updateTime(){const el=document.getElementById('d-time');if(!el)return;const n=new Date();el.textContent=n.toLocaleDateString('en-IN',{weekday:'short',day:'numeric',month:'short'})+' Â· '+n.toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit',hour12:true})}
function toast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');clearTimeout(window._tt);window._tt=setTimeout(()=>t.classList.remove('show'),2800)}
function showErr(id,m){const el=document.getElementById(id);el.textContent=m;el.classList.add('show');setTimeout(()=>el.classList.remove('show'),5000)}
function fbErr(c){return({'auth/email-already-in-use':'Email already registered.','auth/invalid-email':'Invalid email address.','auth/weak-password':'Password too short.','auth/user-not-found':'No account found.','auth/wrong-password':'Incorrect password.','auth/too-many-requests':'Too many attempts â€” try later.','auth/invalid-credential':'Invalid email or password.'}[c]||'Something went wrong.')}

/* BOOT */
setAQI(35);setFilter(78);drawChart(genData(35));
</script>
</body>
</html>
